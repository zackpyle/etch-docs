{"type":"block","gutenbergBlock":{"blockName":"etch/component","attrs":{"ref":67,"attributes":{"showEditor":"{false}","drawerDisplayMethod":"pushBody","drawerId":"etch-drawer","maxWidth":"400px","maxHeight":"100px","isInLoop":"{false}"}},"innerBlocks":[{"blockName":"etch/slot-content","attrs":{"name":"drawerContent"},"innerBlocks":[{"blockName":"etch/element","attrs":{"metadata":{"name":"Heading"},"tag":"h2","attributes":{}},"innerBlocks":[{"blockName":"etch/text","attrs":{"metadata":{"name":"Text"},"content":"Insert your heading here..."},"innerBlocks":[],"innerHTML":"","innerContent":[]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]},"version":2,"styles":{"nzbl2fs":{"type":"class","selector":".etch-drawer","collection":"default","css":"/* etch drawer */\n    --etch-drawer-transition-duration: 0.35s;\n    --etch-drawer-transition-timing-function: ease-in-out;\n    --etch-drawer-z-index: 1000;\n\n    /* Create positioning context for absolute children if needed */\n    position: relative;\n\n    /* etch drawer overlay */\n    /* variable set in props */\n    --etch-drawer-overlay-background: var(--etch-drawer-backdrop-color);\n    --etch-drawer-overlay-z-index: calc(var(--etch-drawer-z-index) - 1);\n\n    /* etch drawer panel */\n    --etch-drawer-panel-background: var(--etch-drawer-background-color);\n    /* default, can be overridden by props or JS */\n    --etch-drawer-panel-max-width: 400px;\n    --etch-drawer-panel-max-height: fit-content;\n    --etch-drawer-panel-box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);\n    /* default, set by JS if WordPress admin bar exists */\n    --etch-drawer-admin-bar-height: 0;\n\n    /* etch drawer close button */\n    --etch-drawer-close-hover-background: #f5f5f5;\n    --etch-drawer-close-padding: 0.5rem;\n    --etch-drawer-close-border-radius: 0.25rem;\n    --etch-drawer-close-position: 0;\n\n    /* etch drawer content */\n    /* variable set by props */\n    --etch-drawer-content-padding: var(--etch-drawer-padding);\n\n    :where(.etch-drawer__overlay) {\n        position: fixed;\n        inset: 0;\n        background: var(--etch-drawer-overlay-background);\n        z-index: var(--etch-drawer-overlay-z-index);\n        opacity: 0;\n        visibility: hidden;\n        transition:\n            opacity var(--etch-drawer-transition-duration) var(--etch-drawer-transition-timing-function),\n            visibility var(--etch-drawer-transition-duration) var(--etch-drawer-transition-timing-function);\n    }\n\n    :where(.etch-drawer__overlay[aria-hidden='false']) {\n        opacity: 1;\n        visibility: visible;\n    }\n\n    :where(.etch-drawer__panel) {\n        position: fixed;\n        background: var(--etch-drawer-panel-background);\n        width: 100%;\n        /* variable set by props */\n        max-width: var(--etch-drawer-panel-max-width);\n        z-index: var(--etch-drawer-z-index);\n        box-shadow: var(--etch-drawer-panel-box-shadow);\n        max-height: 100vh;\n        overflow: hidden;\n        transition: transform var(--etch-drawer-transition-duration) var(--etch-drawer-transition-timing-function);\n    }\n\n    /* Use parent data attribute instead of panel data-side */\n    :where([data-etch-drawer-placement='left'] .etch-drawer__panel) {\n        top: 0;\n        left: 0;\n        bottom: 0;\n        transform: translateX(-100%);\n    }\n\n    :where([data-etch-drawer-placement='right'] .etch-drawer__panel) {\n        top: 0;\n        right: 0;\n        bottom: 0;\n        transform: translateX(100%);\n    }\n\n    :where([data-etch-drawer-placement='top'] .etch-drawer__panel) {\n        top: 0;\n        left: 0;\n        right: 0;\n        max-width: 100%;\n        height: 100%;\n        max-height: var(--etch-drawer-panel-max-height);\n        transform: translateY(-100%);\n    }\n\n    :where([data-etch-drawer-placement='bottom'] .etch-drawer__panel) {\n        bottom: 0;\n        left: 0;\n        right: 0;\n        max-width: 100%;\n        height: 100%;\n        max-height: var(--etch-drawer-panel-max-height);\n        transform: translateY(100%);\n    }\n\n    :where(.etch-drawer__panel[aria-hidden='false']) {\n        transform: translate(0, 0);\n    }\n\n    :where(.etch-drawer__panel[hidden]) {\n        display: none;\n    }\n\n    :where(.etch-drawer__close) {\n        position: absolute;\n        top: var(--etch-drawer-close-position);\n        right: var(--etch-drawer-close-position);\n        padding: var(--etch-drawer-close-padding);\n        border-radius: var(--etch-drawer-close-border-radius);\n        transition: background-color 0.2s ease;\n    }\n\n    :where(.etch-drawer__close:hover) {\n        background: var(--etch-drawer-close-hover-background);\n    }\n\n    :where(.etch-drawer__close:focus-visible) {\n        outline: 2px solid #2466e8;\n        outline-offset: 2px;\n    }\n\n    /* Close Button Variants */\n    :where(.etch-drawer__close--label-icon) {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n    }\n\n    :where(.etch-drawer__close--icon-only svg),\n    :where(.etch-drawer__close--label-icon svg) {\n        width: 1.25rem;\n        height: 1.25rem;\n    }\n\n    :where(.etch-drawer__content) {\n        padding: var(--etch-drawer-content-padding);\n        overflow-y: auto;\n        height: 100%;\n    }\n\n    /* Push behavior - adjust body when drawer is open */\n    /* Apply transition to body whenever push body drawer exists (not just when open) */\n    body:has(&[data-etch-drawer-display-method='pushBody']) {\n        transition: margin var(--etch-drawer-transition-duration) var(--etch-drawer-transition-timing-function);\n    }\n\n    body:has(&[data-etch-drawer-display-method='pushBody'][data-etch-drawer-placement='left'] .etch-drawer__panel[aria-hidden='false']) {\n        margin-left: var(--etch-drawer-panel-max-width);\n    }\n\n    body:has(&[data-etch-drawer-display-method='pushBody'][data-etch-drawer-placement='right'] .etch-drawer__panel[aria-hidden='false']) {\n        margin-left: calc(-1 * var(--etch-drawer-panel-max-width));\n    }\n\n    /* Top and bottom push margins are set dynamically via JavaScript based on actual drawer height */\n    body:has(&[data-etch-drawer-display-method='pushBody'][data-etch-drawer-placement='top'] .etch-drawer__panel[aria-hidden='false']) {\n        margin-top: var(--etch-drawer-panel-max-height);\n    }\n\n    body:has(&[data-etch-drawer-display-method='pushBody'][data-etch-drawer-placement='bottom'] .etch-drawer__panel[aria-hidden='false']) {\n        margin-top: calc(-1 * var(--etch-drawer-panel-max-height));\n    }\n\n    /* WordPress admin bar adjustments */\n    :where([data-etch-drawer-placement='left'] .etch-drawer__panel),\n    :where([data-etch-drawer-placement='right'] .etch-drawer__panel) {\n        /* JS will set --etch-drawer-admin-bar-height if admin bar exists */\n        top: var(--etch-drawer-admin-bar-height, 0);\n        height: calc(100vh - var(--etch-drawer-admin-bar-height, 0));\n        max-height: calc(100vh - var(--etch-drawer-admin-bar-height, 0));\n    }\n\n    :where([data-etch-drawer-placement='top'] .etch-drawer__panel) {\n        top: var(--etch-drawer-admin-bar-height, 0);\n    }","readonly":false},"ae2q5st":{"type":"class","selector":".etch-drawer__overlay","collection":"default","css":"","readonly":false},"tl3b42z":{"type":"class","selector":".etch-drawer__panel","collection":"default","css":"","readonly":false},"qgiijqf":{"type":"class","selector":".etch-drawer__close","collection":"default","css":"","readonly":false},"4mtci00":{"type":"class","selector":".etch-drawer__close--icon-only","collection":"default","css":"","readonly":false},"tvpquys":{"type":"class","selector":".etch-drawer__close--label-only","collection":"default","css":"","readonly":false},"bjbstr6":{"type":"class","selector":".etch-drawer__close--label-icon","collection":"default","css":"","readonly":false},"2r3yzmd":{"type":"class","selector":".etch-drawer__content","collection":"default","css":"","readonly":false}},"components":{"67":{"id":67,"name":"Etch Drawer","key":"EtchDrawer","properties":[{"key":"showEditor","name":"Show / Hide ( Editor )","keyTouched":true,"type":{"primitive":"boolean"},"default":false},{"key":"triggerSelector","name":"Trigger Selector ( .class or #id )","keyTouched":true,"type":{"primitive":"string"},"default":".open-drawer"},{"key":"drawerDisplayMethod","name":"Drawer Display Method","keyTouched":true,"type":{"primitive":"string","specialized":"select"},"default":"overlap","selectOptionsString":"Overlap : overlap\nPush Body : pushBody"},{"key":"drawerPlacement","name":"Drawer Placement","keyTouched":false,"type":{"primitive":"string","specialized":"select"},"default":"left","selectOptionsString":"Left : left\nTop : top\nRight : right\nBottom : bottom"},{"key":"drawerId","name":"Unique Id for Drawer","keyTouched":true,"type":{"primitive":"string"},"default":"etch-drawer"},{"key":"maxWidth","name":"Drawer Max Width","keyTouched":true,"type":{"primitive":"string"},"default":"400px"},{"key":"maxHeight","name":"Drawer Max Height","keyTouched":true,"type":{"primitive":"string"},"default":"100px"},{"key":"cloneSelector","name":"Clone Selector (Will clone an element into Drawer)","keyTouched":true,"type":{"primitive":"string"}},{"key":"drawerBackgroundColor","name":"Drawer Background color","keyTouched":true,"type":{"primitive":"string"},"default":"white"},{"key":"drawerBackdropColor","name":"Drawer Backdrop color","keyTouched":true,"type":{"primitive":"string"},"default":"rgba(0, 0, 0, 0.5)"},{"key":"drawerPadding","name":"Drawer Padding","keyTouched":false,"type":{"primitive":"string"},"default":"1em"},{"key":"closeButtonVariant","name":"Close Button Variant","keyTouched":true,"type":{"primitive":"string","specialized":"select"},"default":"icon","selectOptionsString":"Icon : icon\nLabel : label\nLabel and Icon : label-icon"},{"key":"closeButtonLabel","name":"Close Button Label","keyTouched":true,"type":{"primitive":"string"},"default":"Close"},{"key":"isInLoop","name":"Drawer is in a Loop","keyTouched":true,"type":{"primitive":"boolean"},"default":true}],"description":"","legacyId":"","blocks":[{"blockName":"etch/element","attrs":{"metadata":{"name":"Etch Drawer"},"script":{"code":"Y2xhc3MgRXRjaERyYXdlclNjcmlwdCB7CgkKCXN0YXRpYyBTRUxFQ1RPUlMgPSB7CgkJT1ZFUkxBWTogJy5ldGNoLWRyYXdlcl9fb3ZlcmxheScsCgkJUEFORUw6ICcuZXRjaC1kcmF3ZXJfX3BhbmVsJywKCQlDTE9TRV9CVE46ICcuZXRjaC1kcmF3ZXJfX2Nsb3NlJywKCQlDT05URU5UOiAnLmV0Y2gtZHJhd2VyX19jb250ZW50JywKCQlGT0NVU0FCTEU6ICdidXR0b24sIFtocmVmXSwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIFt0YWJpbmRleF06bm90KFt0YWJpbmRleD0iLTEiXSknCgl9OwoKCXN0YXRpYyBBVFRSSUJVVEVTID0gewoJCURSQVdFUl9JRDogJ2RhdGEtZXRjaC1kcmF3ZXItaWQnLAoJCVRSSUdHRVJfU0VMRUNUT1I6ICdkYXRhLWV0Y2gtZHJhd2VyLXRyaWdnZXItc2VsZWN0b3InLAoJCVBMQUNFTUVOVDogJ2RhdGEtZXRjaC1kcmF3ZXItcGxhY2VtZW50JywKCQlESVNQTEFZX01FVEhPRDogJ2RhdGEtZXRjaC1kcmF3ZXItZGlzcGxheS1tZXRob2QnLAoJCU1BWF9XSURUSDogJ2RhdGEtZXRjaC1kcmF3ZXItbWF4LXdpZHRoJywKCQlFRElUT1JfVE9HR0xFOiAnZGF0YS1ldGNoLWRyYXdlci1lZGl0b3ItdG9nZ2xlJywKCQlDTE9ORV9TRUxFQ1RPUjogJ2RhdGEtZXRjaC1kcmF3ZXItY2xvbmUtc2VsZWN0b3InLAoJCUlTX0lOX0xPT1A6ICdkYXRhLWV0Y2gtZHJhd2VyLWxvb3AnCgl9OwoKCXN0YXRpYyBERUZBVUxUUyA9IHsKCQlEUkFXRVJfSUQ6ICdldGNoLWRyYXdlcicsCgkJUExBQ0VNRU5UOiAnbGVmdCcsCgkJRElTUExBWV9NRVRIT0Q6ICdvdmVybGFwJywKCQlNQVhfV0lEVEg6ICc0MDBweCcsCgkJVFJBTlNJVElPTl9EVVJBVElPTjogJzAuMzVzJwoJfTsKCgljb25zdHJ1Y3RvcihkcmF3ZXJFbCkgewoJCXRoaXMuZHJhd2VyRWwgPSBkcmF3ZXJFbDsKCQl0aGlzLnRyaWdnZXIgPSBudWxsOwoJCXRoaXMub3ZlcmxheSA9IG51bGw7CgkJdGhpcy5wYW5lbCA9IG51bGw7CgkJdGhpcy5jbG9zZUJ0biA9IG51bGw7CgkJdGhpcy5vcmlnaW5hbFBhcmVudCA9IG51bGw7CgkJdGhpcy5vcmlnaW5hbE5leHRTaWJsaW5nID0gbnVsbDsKCQl0aGlzLmlzSW5FdGNoID0gdGhpcy5pbkV0Y2goKTsKCgkJdGhpcy5pbml0KCk7Cgl9CgoJaW5FdGNoKCkgewoJCXJldHVybiB3aW5kb3cgIT09IHdpbmRvdy50b3AgJiYgd2luZG93LmZyYW1lRWxlbWVudD8uaWQgPT09ICdldGNoLWlmcmFtZSc7Cgl9CgoJaW5pdCgpIHsKCQlpZiAoIXRoaXMuZHJhd2VyRWwpIHsKCQkJcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ0RyYXdlciBlbGVtZW50IG5vdCBmb3VuZCcpOwoJCX0KCgkJY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKCQlpZiAoIWNvbmZpZy5kcmF3ZXJJZCkgewoJCQlyZXR1cm4gY29uc29sZS5lcnJvcihgRHJhd2VyIElEIGlzIHJlcXVpcmVkLiBTZXQgJHtFdGNoRHJhd2VyU2NyaXB0LkFUVFJJQlVURVMuRFJBV0VSX0lEfSBhdHRyaWJ1dGUuYCk7CgkJfQoKCQlpZiAoIXRoaXMuZWxlbWVudHNSZWZlcmVuY2UoKSkgcmV0dXJuOwoKCQl0aGlzLmdldFRyaWdnZXJTZWxlY3RvcigpOwoJCXRoaXMuc2V0dXBQYW5lbChjb25maWcpOwoJCXRoaXMuc2V0dXBUcmFuc2l0aW9ucygpOwoJCXRoaXMuc2V0SW5pdGlhbFN0YXRlKGNvbmZpZyk7CgkJdGhpcy5hZGp1c3RGb3JXb3JkUHJlc3NBZG1pbkJhcihjb25maWcpOwoJCXRoaXMuYXR0YWNoRXZlbnRMaXN0ZW5lcnMoKTsKCgkJaWYgKHRoaXMuaXNJbkV0Y2gpIHsKCQkJdGhpcy5vYnNlcnZlQ29uZmlnQ2hhbmdlcygpOyAgLy8gQ3JlYXRlIG9ic2VydmVyIE9OTFkKCQkJdGhpcy5zZXR1cEVkaXRvclRvZ2dsZSgpOyAgICAgLy8gQWx3YXlzIGFjdGl2ZQoJCX0KCX0KCglnZXRDb25maWcoKSB7CgkJY29uc3QgZGF0YXNldCA9IHRoaXMuZHJhd2VyRWwuZGF0YXNldDsKCQlyZXR1cm4gewoJCQlkcmF3ZXJJZDogZGF0YXNldC5ldGNoRHJhd2VySWQ/LnRyaW0oKSB8fCBFdGNoRHJhd2VyU2NyaXB0LkRFRkFVTFRTLkRSQVdFUl9JRCwKCQkJcGxhY2VtZW50OiBkYXRhc2V0LmV0Y2hEcmF3ZXJQbGFjZW1lbnQgfHwgRXRjaERyYXdlclNjcmlwdC5ERUZBVUxUUy5QTEFDRU1FTlQsCgkJCWRpc3BsYXlNZXRob2Q6IGRhdGFzZXQuZXRjaERyYXdlckRpc3BsYXlNZXRob2QgfHwgRXRjaERyYXdlclNjcmlwdC5ERUZBVUxUUy5ESVNQTEFZX01FVEhPRCwKCQkJbWF4V2lkdGg6IGRhdGFzZXQuZXRjaERyYXdlck1heFdpZHRoIHx8IEV0Y2hEcmF3ZXJTY3JpcHQuREVGQVVMVFMuTUFYX1dJRFRILAoJCQllZGl0b3JUb2dnbGU6IGRhdGFzZXQuZXRjaERyYXdlckVkaXRvclRvZ2dsZQoJCX07Cgl9CgoJZWxlbWVudHNSZWZlcmVuY2UoKSB7CgkJdGhpcy5vdmVybGF5ID0gdGhpcy5kcmF3ZXJFbC5xdWVyeVNlbGVjdG9yKEV0Y2hEcmF3ZXJTY3JpcHQuU0VMRUNUT1JTLk9WRVJMQVkpOwoJCXRoaXMucGFuZWwgPSB0aGlzLmRyYXdlckVsLnF1ZXJ5U2VsZWN0b3IoRXRjaERyYXdlclNjcmlwdC5TRUxFQ1RPUlMuUEFORUwpOwoJCXRoaXMuY2xvc2VCdG4gPSB0aGlzLmRyYXdlckVsLnF1ZXJ5U2VsZWN0b3IoRXRjaERyYXdlclNjcmlwdC5TRUxFQ1RPUlMuQ0xPU0VfQlROKTsKCgkJaWYgKCF0aGlzLm92ZXJsYXkgfHwgIXRoaXMucGFuZWwgfHwgIXRoaXMuY2xvc2VCdG4pIHsKCQkJY29uc29sZS5lcnJvcignUmVxdWlyZWQgZHJhd2VyIGVsZW1lbnRzIG5vdCBmb3VuZCcpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCXJldHVybiB0cnVlOwoJfQoKCWdldFRyaWdnZXJTZWxlY3RvcigpIHsKCQljb25zdCB0cmlnZ2VyU2VsZWN0b3IgPSB0aGlzLmRyYXdlckVsLmdldEF0dHJpYnV0ZShFdGNoRHJhd2VyU2NyaXB0LkFUVFJJQlVURVMuVFJJR0dFUl9TRUxFQ1RPUik/LnRyaW0oKTsKCQkKCQlpZiAoIXRyaWdnZXJTZWxlY3RvcikgcmV0dXJuOwoKCQl0aGlzLnRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRyaWdnZXJTZWxlY3Rvcik7CgkJCgkJaWYgKCF0aGlzLnRyaWdnZXIpIHsKCQkJY29uc29sZS5lcnJvcihgVHJpZ2dlciBlbGVtZW50IG5vdCBmb3VuZCBmb3Igc2VsZWN0b3I6ICR7dHJpZ2dlclNlbGVjdG9yfWApOwoJCX0KCX0KCgljbG9uZUV4dGVybmFsQ29udGVudCgpIHsKCQljb25zdCBjbG9uZVNlbGVjdG9yID0gdGhpcy5kcmF3ZXJFbC5nZXRBdHRyaWJ1dGUoRXRjaERyYXdlclNjcmlwdC5BVFRSSUJVVEVTLkNMT05FX1NFTEVDVE9SKT8udHJpbSgpOwoJCQoJCWlmICghY2xvbmVTZWxlY3RvcikgcmV0dXJuOwoKCQljb25zdCBjb250ZW50ID0gdGhpcy5wYW5lbC5xdWVyeVNlbGVjdG9yKEV0Y2hEcmF3ZXJTY3JpcHQuU0VMRUNUT1JTLkNPTlRFTlQpOwoJCQoJCS8vIENoZWNrIGlmIGFscmVhZHkgbW92ZWQKCQlpZiAoY29udGVudC5kYXRhc2V0LmNsb25lZCA9PT0gJ3RydWUnKSByZXR1cm47CgoJCWNvbnN0IHNvdXJjZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsb25lU2VsZWN0b3IpOwoJCQoJCWlmICghc291cmNlRWxlbWVudCkgewoJCQljb25zb2xlLmVycm9yKGBFbGVtZW50IHRvIGNsb25lIG5vdCBmb3VuZCBmb3Igc2VsZWN0b3I6ICR7Y2xvbmVTZWxlY3Rvcn1gKTsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gU3RvcmUgb3JpZ2luYWwgcGFyZW50IGFuZCBuZXh0IHNpYmxpbmcgdG8gcmVzdG9yZSBwb3NpdGlvbiBsYXRlcgoJCXRoaXMub3JpZ2luYWxQYXJlbnQgPSBzb3VyY2VFbGVtZW50LnBhcmVudE5vZGU7CgkJdGhpcy5vcmlnaW5hbE5leHRTaWJsaW5nID0gc291cmNlRWxlbWVudC5uZXh0U2libGluZzsKCQkKCQlpZiAoY29udGVudCkgewoJCQljb250ZW50Lmluc2VydEJlZm9yZShzb3VyY2VFbGVtZW50LCBjb250ZW50LmZpcnN0Q2hpbGQpOwoJCQljb250ZW50LmRhdGFzZXQuY2xvbmVkID0gJ3RydWUnOwoJCX0KCX0KCglyZW1vdmVDbG9uZWRDb250ZW50KCkgewoJCWNvbnN0IGNvbnRlbnQgPSB0aGlzLnBhbmVsLnF1ZXJ5U2VsZWN0b3IoRXRjaERyYXdlclNjcmlwdC5TRUxFQ1RPUlMuQ09OVEVOVCk7CgkJCgkJaWYgKGNvbnRlbnQuZGF0YXNldC5jbG9uZWQgIT09ICd0cnVlJykgcmV0dXJuOwoJCQoJCWNvbnN0IGNsb25lU2VsZWN0b3IgPSB0aGlzLmRyYXdlckVsLmdldEF0dHJpYnV0ZShFdGNoRHJhd2VyU2NyaXB0LkFUVFJJQlVURVMuQ0xPTkVfU0VMRUNUT1IpPy50cmltKCk7CgkJaWYgKCFjbG9uZVNlbGVjdG9yKSByZXR1cm47CgoJCWNvbnN0IG1vdmVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xvbmVTZWxlY3Rvcik7CgkJCgkJaWYgKG1vdmVkRWxlbWVudCAmJiB0aGlzLm9yaWdpbmFsUGFyZW50KSB7CgkJCWlmICh0aGlzLm9yaWdpbmFsTmV4dFNpYmxpbmcpIHsKCQkJCXRoaXMub3JpZ2luYWxQYXJlbnQuaW5zZXJ0QmVmb3JlKG1vdmVkRWxlbWVudCwgdGhpcy5vcmlnaW5hbE5leHRTaWJsaW5nKTsKCQkJfSBlbHNlIHsKCQkJCXRoaXMub3JpZ2luYWxQYXJlbnQuYXBwZW5kQ2hpbGQobW92ZWRFbGVtZW50KTsKCQkJfQoJCQkKCQkJZGVsZXRlIGNvbnRlbnQuZGF0YXNldC5jbG9uZWQ7CgkJCXRoaXMub3JpZ2luYWxQYXJlbnQgPSBudWxsOwoJCQl0aGlzLm9yaWdpbmFsTmV4dFNpYmxpbmcgPSBudWxsOwoJCX0KCX0KCglzZXR1cFBhbmVsKGNvbmZpZykgewoJCWlmIChjb25maWcubWF4V2lkdGgpIHsKCQkJdGhpcy5kcmF3ZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ldGNoLWRyYXdlci1wYW5lbC1tYXgtd2lkdGgnLCBjb25maWcubWF4V2lkdGgpOwoJCX0KCQkKCQlpZiAoIXRoaXMuaXNJbkV0Y2ggJiYgdGhpcy50cmlnZ2VyKSB7CgkJCXRoaXMudHJpZ2dlci5zZXRBdHRyaWJ1dGUoJ2FyaWEtY29udHJvbHMnLCB0aGlzLnBhbmVsLmlkKTsKCQl9Cgl9CgoJc2V0dXBUcmFuc2l0aW9ucygpIHsKCQljb25zdCBwcmVmZXJzUmVkdWNlZE1vdGlvbiA9IHdpbmRvdy5tYXRjaE1lZGlhPy4oJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpJyk/Lm1hdGNoZXM7CgkJY29uc3QgZHVyYXRpb24gPSBwcmVmZXJzUmVkdWNlZE1vdGlvbiA/ICcwcycgOiBFdGNoRHJhd2VyU2NyaXB0LkRFRkFVTFRTLlRSQU5TSVRJT05fRFVSQVRJT047CgoJCXRoaXMuZHJhd2VyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tZXRjaC1kcmF3ZXItdHJhbnNpdGlvbi1kdXJhdGlvbicsIGR1cmF0aW9uKTsKCQl0aGlzLmRyYXdlckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWV0Y2gtZHJhd2VyLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgJ2Vhc2UtaW4tb3V0Jyk7Cgl9CgoJc2V0SW5pdGlhbFN0YXRlKGNvbmZpZykgewoJCWlmICh0aGlzLmlzSW5FdGNoICYmIGNvbmZpZy5lZGl0b3JUb2dnbGUgPT09ICd0cnVlJykgewoJCQl0aGlzLnNldE9wZW5TdGF0ZSgpOwoJCX0gZWxzZSB7CgkJCXRoaXMuc2V0Q2xvc2VkU3RhdGUoKTsKCQl9Cgl9CgoJc2V0T3BlblN0YXRlKCkgewoJCXRoaXMucGFuZWwucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTsKCQl0aGlzLnBhbmVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTsKCQl0aGlzLm92ZXJsYXkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpOwoJCQoJCWlmICh0aGlzLnRyaWdnZXIpIHsKCQkJdGhpcy50cmlnZ2VyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7CgkJfQoJfQoKCXNldENsb3NlZFN0YXRlKCkgewoJCXRoaXMucGFuZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CgkJdGhpcy5wYW5lbC5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTsKCQl0aGlzLm92ZXJsYXkuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CgkJCgkJaWYgKHRoaXMudHJpZ2dlcikgewoJCQl0aGlzLnRyaWdnZXIuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7CgkJfQoJfQoKCWFkanVzdEZvcldvcmRQcmVzc0FkbWluQmFyKGNvbmZpZykgewoJCWlmICh0aGlzLmlzSW5FdGNoKSByZXR1cm47CgoJCWNvbnN0IHdwQWRtaW5CYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd3BhZG1pbmJhcicpOwoJCWlmICghd3BBZG1pbkJhcikgewoJCQl0aGlzLmRyYXdlckVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWV0Y2gtZHJhd2VyLWFkbWluLWJhci1oZWlnaHQnKTsKCQkJcmV0dXJuOwoJCX0KCgkJY29uc3QgYWRtaW5CYXJIZWlnaHQgPSB3cEFkbWluQmFyLm9mZnNldEhlaWdodDsKCQljb25zdCBoZWlnaHRQeCA9IGAke2FkbWluQmFySGVpZ2h0fXB4YDsKCgkJdGhpcy5kcmF3ZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ldGNoLWRyYXdlci1hZG1pbi1iYXItaGVpZ2h0JywgaGVpZ2h0UHgpOwoJfQoKCW9ic2VydmVDb25maWdDaGFuZ2VzKCkgewoJCWNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4gewoJCQltdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHsKCQkJCWlmIChtdXRhdGlvbi50eXBlICE9PSAnYXR0cmlidXRlcycpIHJldHVybjsKCQkJCQoJCQkJaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IEV0Y2hEcmF3ZXJTY3JpcHQuQVRUUklCVVRFUy5QTEFDRU1FTlQpIHsKCQkJCQljb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpOwoJCQkJCXRoaXMuYWRqdXN0Rm9yV29yZFByZXNzQWRtaW5CYXIoY29uZmlnKTsKCQkJCX0KCQkJCQoJCQkJaWYgKG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IEV0Y2hEcmF3ZXJTY3JpcHQuQVRUUklCVVRFUy5NQVhfV0lEVEgpIHsKCQkJCQljb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpOwoJCQkJCWlmIChjb25maWcubWF4V2lkdGgpIHsKCQkJCQkJdGhpcy5kcmF3ZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ldGNoLWRyYXdlci1wYW5lbC1tYXgtd2lkdGgnLCBjb25maWcubWF4V2lkdGgpOwoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJfSk7CgoJCXRoaXMuY29uZmlnT2JzZXJ2ZXIgPSBvYnNlcnZlcjsKCX0KCglzdGFydENvbmZpZ09ic2VydmVyKCkgewoJCWlmICghdGhpcy5jb25maWdPYnNlcnZlcikgcmV0dXJuOwoKCQl0aGlzLmNvbmZpZ09ic2VydmVyLm9ic2VydmUodGhpcy5kcmF3ZXJFbCwgewoJCQlhdHRyaWJ1dGVzOiB0cnVlLAoJCQlhdHRyaWJ1dGVGaWx0ZXI6IFsKCQkJCUV0Y2hEcmF3ZXJTY3JpcHQuQVRUUklCVVRFUy5QTEFDRU1FTlQsCgkJCQlFdGNoRHJhd2VyU2NyaXB0LkFUVFJJQlVURVMuTUFYX1dJRFRICgkJCV0KCQl9KTsKCX0KCglzdG9wQ29uZmlnT2JzZXJ2ZXIoKSB7CgkJaWYgKCF0aGlzLmNvbmZpZ09ic2VydmVyKSByZXR1cm47CgkJdGhpcy5jb25maWdPYnNlcnZlci5kaXNjb25uZWN0KCk7Cgl9CgoJc2V0dXBFZGl0b3JUb2dnbGUoKSB7CgkJY29uc3Qgc2hvdWxkUmVzcG9uZFRvVG9nZ2xlID0gKCkgPT4gewoJCQljb25zdCBjdXJyZW50SXNJbkxvb3AgPSB0aGlzLmRyYXdlckVsLmRhdGFzZXQuZXRjaERyYXdlckxvb3AgPT09ICJ0cnVlIjsKCQkJY29uc3QgY3VycmVudERyYXdlcklkID0gdGhpcy5kcmF3ZXJFbC5kYXRhc2V0LmV0Y2hEcmF3ZXJJZDsKCQkJCgkJCS8vIElmIG5vdCBpbiBsb29wLCBhbHdheXMgcmVzcG9uZAoJCQlpZiAoIWN1cnJlbnRJc0luTG9vcCkgcmV0dXJuIHRydWU7CgkJCQoJCQkvLyBJZiBpbiBsb29wLCBjaGVjayBpZiB0aGlzIGlzIHRoZSBmaXJzdCBkcmF3ZXIKCQkJLy8gV2hlbiBpbiBlZGl0b3IsIGRyYXdlcnMgZG9uJ3QgZ2V0IGluZGV4ZWQsIHNvIHdlIG5lZWQgdG8gZmluZCB0aGUgZmlyc3Qgb25lCgkJCS8vIGJ5IGNoZWNraW5nIGFsbCBkcmF3ZXJzIHdpdGggdGhlIHNhbWUgYmFzZSBJRAoJCQlpZiAoIWN1cnJlbnREcmF3ZXJJZCkgcmV0dXJuIGZhbHNlOwoJCQkKCQkJLy8gR2V0IHRoZSBiYXNlIElEIChyZW1vdmUgYW55IGV4aXN0aW5nIGluZGV4IHN1ZmZpeCBpZiBwcmVzZW50KQoJCQljb25zdCBiYXNlSWQgPSBjdXJyZW50RHJhd2VySWQucmVwbGFjZSgvLVxkKyQvLCAnJyk7CgkJCQoJCQkvLyBGaW5kIGFsbCBkcmF3ZXJzIHdpdGggdGhlIHNhbWUgYmFzZSBJRCB0aGF0IGFyZSBpbiBhIGxvb3AKCQkJY29uc3QgYWxsRHJhd2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ldGNoLWRyYXdlcicpOwoJCQlsZXQgZmlyc3REcmF3ZXJGb3VuZCA9IGZhbHNlOwoJCQkKCQkJZm9yIChjb25zdCBkcmF3ZXIgb2YgYWxsRHJhd2VycykgewoJCQkJY29uc3QgZHJhd2VySWQgPSBkcmF3ZXIuZGF0YXNldC5ldGNoRHJhd2VySWQ7CgkJCQljb25zdCBpc0luTG9vcCA9IGRyYXdlci5kYXRhc2V0LmV0Y2hEcmF3ZXJMb29wID09PSAidHJ1ZSI7CgkJCQkKCQkJCWlmICghZHJhd2VySWQgfHwgIWlzSW5Mb29wKSBjb250aW51ZTsKCQkJCQoJCQkJY29uc3QgZHJhd2VyQmFzZUlkID0gZHJhd2VySWQucmVwbGFjZSgvLVxkKyQvLCAnJyk7CgkJCQkKCQkJCWlmIChkcmF3ZXJCYXNlSWQgPT09IGJhc2VJZCkgewoJCQkJCS8vIFRoaXMgaXMgdGhlIGZpcnN0IGRyYXdlciB3aXRoIHRoaXMgYmFzZSBJRAoJCQkJCWlmIChkcmF3ZXIgPT09IHRoaXMuZHJhd2VyRWwpIHsKCQkJCQkJZmlyc3REcmF3ZXJGb3VuZCA9IHRydWU7CgkJCQkJCWJyZWFrOwoJCQkJCX0gZWxzZSB7CgkJCQkJCS8vIEZvdW5kIGFub3RoZXIgZHJhd2VyIHdpdGggc2FtZSBiYXNlIElEIGJlZm9yZSB0aGlzIG9uZQoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQlyZXR1cm4gZmlyc3REcmF3ZXJGb3VuZDsKCQl9OwoKCQljb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHsKCQkJbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7CgkJCQlpZiAoCgkJCQkJbXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmCgkJCQkJbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gRXRjaERyYXdlclNjcmlwdC5BVFRSSUJVVEVTLkVESVRPUl9UT0dHTEUKCQkJCSkgewoJCQkJCWlmICghc2hvdWxkUmVzcG9uZFRvVG9nZ2xlKCkpIHJldHVybjsKCQkJCQkKCQkJCQljb25zdCB0b2dnbGVWYWx1ZSA9IHRoaXMuZHJhd2VyRWwuZGF0YXNldC5ldGNoRHJhd2VyRWRpdG9yVG9nZ2xlOwoKCQkJCQlpZiAodG9nZ2xlVmFsdWUgPT09ICd0cnVlJykgewoJCQkJCQl0aGlzLm9wZW4oKTsKCQkJCQl9IGVsc2UgaWYgKHRvZ2dsZVZhbHVlID09PSAnZmFsc2UnKSB7CgkJCQkJCXRoaXMuY2xvc2UoKTsKCQkJCQl9CgkJCQl9CgoJCQkJaWYgKAoJCQkJCW11dGF0aW9uLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJgoJCQkJCW11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IEV0Y2hEcmF3ZXJTY3JpcHQuQVRUUklCVVRFUy5JU19JTl9MT09QCgkJCQkpIHsKCQkJCQkKCQkJCX0KCQkJfSk7CgkJfSk7CgoJCS8vIHRoaXMgb2JzZXJ2ZXIgaXMgYWx3YXlzIGFjdGl2ZSBpbiBFVENICgkJb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmRyYXdlckVsLCB7CgkJCWF0dHJpYnV0ZXM6IHRydWUsCgkJCWF0dHJpYnV0ZUZpbHRlcjogWwoJCQkJRXRjaERyYXdlclNjcmlwdC5BVFRSSUJVVEVTLkVESVRPUl9UT0dHTEUsCgkJCQlFdGNoRHJhd2VyU2NyaXB0LkFUVFJJQlVURVMuSVNfSU5fTE9PUAoJCQldCgkJfSk7CgoJCXRoaXMuZWRpdG9yVG9nZ2xlT2JzZXJ2ZXIgPSBvYnNlcnZlcjsKCX0KCglhdHRhY2hFdmVudExpc3RlbmVycygpIHsKCQlpZiAodGhpcy50cmlnZ2VyICYmICF0aGlzLmlzSW5FdGNoKSB7CgkJCXRoaXMuYXR0YWNoVHJpZ2dlckxpc3RlbmVycygpOwoJCX0KCgkJLy8gRG9uJ3QgYXR0YWNoIGNsb3NlIGxpc3RlbmVycyB3aGVuIGluIEV0Y2ggZWRpdG9yIC0gb25seSBhbGxvdyBjbG9zaW5nIHZpYSBlZGl0b3IgdG9nZ2xlCgkJaWYgKCF0aGlzLmlzSW5FdGNoKSB7CgkJCXRoaXMuY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpOwoJCQl0aGlzLm92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpOwoJCQl0aGlzLnBhbmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4gdGhpcy5oYW5kbGVLZXlib2FyZE5hdmlnYXRpb24oZSkpOwoJCX0KCX0KCglhdHRhY2hUcmlnZ2VyTGlzdGVuZXJzKCkgewoJCXRoaXMudHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMub3BlbigpKTsKCQl0aGlzLnRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB0aGlzLmhhbmRsZVRyaWdnZXJLZXlkb3duKGUpKTsKCX0KCgloYW5kbGVUcmlnZ2VyS2V5ZG93bihlKSB7CgkJaWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHsKCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJCQl0aGlzLm9wZW4oKTsKCQl9Cgl9CgoJb3BlbigpIHsKCQljb25zdCBjb25maWcgPSB0aGlzLmdldENvbmZpZygpOwoJCWlmIChjb25maWcubWF4V2lkdGgpIHsKCQkJdGhpcy5kcmF3ZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ldGNoLWRyYXdlci1wYW5lbC1tYXgtd2lkdGgnLCBjb25maWcubWF4V2lkdGgpOwoJCX0KCgkJLy8gU3RhcnQgb2JzZXJ2aW5nIHBsYWNlbWVudCArIHdpZHRoIHdoZW4gZHJhd2VyIG9wZW5zIChFVENIIG9ubHkpCgkJaWYgKHRoaXMuaXNJbkV0Y2gpIHsKCQkJdGhpcy5zdGFydENvbmZpZ09ic2VydmVyKCk7CgkJfQoJCQoJCWlmICh0aGlzLnRyaWdnZXIpIHsKCQkJdGhpcy50cmlnZ2VyLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7CgkJfQoKCQl0aGlzLmNsb25lRXh0ZXJuYWxDb250ZW50KCk7CgkJdGhpcy5zaG93UGFuZWwoKTsKCQkKCQlpZiAoY29uZmlnLmRpc3BsYXlNZXRob2QgPT09ICdwdXNoQm9keScpIHsKCQkJdGhpcy5zZXR1cFB1c2hCb2R5TW9kZShjb25maWcpOwoJCX0KCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOwoKCQl0aGlzLnBhbmVsLmZvY3VzKCk7Cgl9CgoJc2hvd1BhbmVsKCkgewoJCXRoaXMucGFuZWwucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTsKCQkKCQl0aGlzLnBhbmVsLm9mZnNldEhlaWdodDsgLy8gZm9yY2UgcmVmbG93CgkJCgkJdGhpcy5wYW5lbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7CgkJdGhpcy5vdmVybGF5LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTsKCX0KCglzZXR1cFB1c2hCb2R5TW9kZShjb25maWcpIHsKCQljb25zdCBwcmVmZXJzUmVkdWNlZE1vdGlvbiA9IHdpbmRvdy5tYXRjaE1lZGlhPy4oJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpJyk/Lm1hdGNoZXM7CgkJY29uc3QgZHVyYXRpb24gPSBwcmVmZXJzUmVkdWNlZE1vdGlvbiA/ICcwcycgOiBFdGNoRHJhd2VyU2NyaXB0LkRFRkFVTFRTLlRSQU5TSVRJT05fRFVSQVRJT047CgkJCgkJZG9jdW1lbnQuYm9keS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ldGNoLWRyYXdlci1wYW5lbC1tYXgtd2lkdGgnLCBjb25maWcubWF4V2lkdGgpOwoJCWRvY3VtZW50LmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoJy0tZXRjaC1kcmF3ZXItdHJhbnNpdGlvbi1kdXJhdGlvbicsIGR1cmF0aW9uKTsKCQlkb2N1bWVudC5ib2R5LnN0eWxlLnNldFByb3BlcnR5KCctLWV0Y2gtZHJhd2VyLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgJ2Vhc2UtaW4tb3V0Jyk7CgkJCgkJaWYgKGNvbmZpZy5wbGFjZW1lbnQgPT09ICd0b3AnIHx8IGNvbmZpZy5wbGFjZW1lbnQgPT09ICdib3R0b20nKSB7CgkJCXRoaXMuc2V0UGFuZWxIZWlnaHRGb3JQdXNoQm9keSgpOwoJCX0KCX0KCglzZXRQYW5lbEhlaWdodEZvclB1c2hCb2R5KCkgewoJCXJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7CgkJCWNvbnN0IHBhbmVsSGVpZ2h0ID0gdGhpcy5wYW5lbC5vZmZzZXRIZWlnaHQ7CgkJCWRvY3VtZW50LmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoJy0tZXRjaC1kcmF3ZXItcGFuZWwtbWF4LWhlaWdodCcsIGAke3BhbmVsSGVpZ2h0fXB4YCk7CgkJfSk7Cgl9CgoJY2xvc2UoKSB7CgkJY29uc3QgY29uZmlnID0gdGhpcy5nZXRDb25maWcoKTsKCgkJaWYgKHRoaXMudHJpZ2dlcikgewoJCQl0aGlzLnRyaWdnZXIuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7CgkJfQoKCQl0aGlzLmhpZGVQYW5lbChjb25maWcpOwoKCQlpZiAodGhpcy50cmlnZ2VyKSB7CgkJCXRoaXMudHJpZ2dlci5mb2N1cygpOwoJCX0KCX0KCgloaWRlUGFuZWwoY29uZmlnKSB7CgkJaWYgKHRoaXMucGFuZWwuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHsKCQkJZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7CgkJfQoJCQoJCXJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7CgkJCXRoaXMucGFuZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CgkJCXRoaXMub3ZlcmxheS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTsKCQkJCgkJCWNvbnN0IGR1cmF0aW9uID0gdGhpcy5nZXRUcmFuc2l0aW9uRHVyYXRpb24oKTsKCQkJc2V0VGltZW91dCgoKSA9PiB7CgkJCQl0aGlzLnBhbmVsLnNldEF0dHJpYnV0ZSgnaGlkZGVuJywgJycpOwoJCQkJdGhpcy5jbGVhbnVwQWZ0ZXJDbG9zZShjb25maWcpOwoJCQl9LCBkdXJhdGlvbik7CgkJfSk7Cgl9CgoJZ2V0VHJhbnNpdGlvbkR1cmF0aW9uKCkgewoJCXJldHVybiBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUodGhpcy5wYW5lbCkudHJhbnNpdGlvbkR1cmF0aW9uKSAqIDEwMDAgfHwgMzUwOwoJfQoKCWNsZWFudXBBZnRlckNsb3NlKGNvbmZpZykgewoKCQlpZiAodGhpcy5pc0luRXRjaCkgewoJCQl0aGlzLnN0b3BDb25maWdPYnNlcnZlcigpOwoJCX0KCgkJaWYgKGNvbmZpZy5kaXNwbGF5TWV0aG9kID09PSAncHVzaEJvZHknKSB7CgkJCWRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tZXRjaC1kcmF3ZXItcGFuZWwtbWF4LXdpZHRoJyk7CgkJCWRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJy0tZXRjaC1kcmF3ZXItcGFuZWwtbWF4LWhlaWdodCcpOwoJCQlkb2N1bWVudC5ib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCctLWV0Y2gtZHJhd2VyLXRyYW5zaXRpb24tZHVyYXRpb24nKTsKCQkJZG9jdW1lbnQuYm9keS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnLS1ldGNoLWRyYXdlci10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbicpOwoJCX0KCQkKCQlkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7CgkJCgkJdGhpcy5yZW1vdmVDbG9uZWRDb250ZW50KCk7Cgl9CgoJaGFuZGxlS2V5Ym9hcmROYXZpZ2F0aW9uKGUpIHsKCQlpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7CgkJCXRoaXMuY2xvc2UoKTsKCQkJcmV0dXJuOwoJCX0KCQkKCQlpZiAoZS5rZXkgPT09ICdUYWInKSB7CgkJCXRoaXMuaGFuZGxlVGFiS2V5TmF2aWdhdGlvbihlKTsKCQl9Cgl9CgoJaGFuZGxlVGFiS2V5TmF2aWdhdGlvbihlKSB7CgkJY29uc3QgZm9jdXNhYmxlRWxlbWVudHMgPSB0aGlzLmdldEZvY3VzYWJsZUVsZW1lbnRzKCk7CgkJaWYgKGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwoKCQljb25zdCBmaXJzdEVsZW1lbnQgPSBmb2N1c2FibGVFbGVtZW50c1swXTsKCQljb25zdCBsYXN0RWxlbWVudCA9IGZvY3VzYWJsZUVsZW1lbnRzW2ZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDFdOwoKCQlpZiAoZS5zaGlmdEtleSkgewoJCQlpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZmlyc3RFbGVtZW50KSB7CgkJCQllLnByZXZlbnREZWZhdWx0KCk7CgkJCQlsYXN0RWxlbWVudD8uZm9jdXMoKTsKCQkJfQoJCX0gZWxzZSB7CgkJCWlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBsYXN0RWxlbWVudCkgewoJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoJCQkJZmlyc3RFbGVtZW50Py5mb2N1cygpOwoJCQl9CgkJfQoJfQoKCWdldEZvY3VzYWJsZUVsZW1lbnRzKCkgewoJCXJldHVybiBBcnJheS5mcm9tKHRoaXMucGFuZWwucXVlcnlTZWxlY3RvckFsbChFdGNoRHJhd2VyU2NyaXB0LlNFTEVDVE9SUy5GT0NVU0FCTEUpKTsKCX0KfQoKCmZ1bmN0aW9uIHByb2Nlc3NMb29wRHJhd2VyVHJpZ2dlcihkcmF3ZXJFbCwgaW5kZXgpIHsKCWNvbnN0IHRyaWdnZXJTZWxlY3RvciA9IGRyYXdlckVsLmRhdGFzZXQuZXRjaERyYXdlclRyaWdnZXJTZWxlY3RvcjsKCglpZiAoIXRyaWdnZXJTZWxlY3RvcikgcmV0dXJuOwoKCWNvbnN0IHRyaWdnZXJFbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRyaWdnZXJTZWxlY3Rvcik7CgoJaWYgKHRyaWdnZXJFbHMubGVuZ3RoID4gaW5kZXgpIHsKCQljb25zdCB0cmlnZ2VyRWwgPSB0cmlnZ2VyRWxzW2luZGV4XTsKCgkJdHJpZ2dlckVsLmRhdGFzZXQuZHJhd2VyVHJpZ2dlckluZGV4ID0gaW5kZXg7CgoJCWRyYXdlckVsLmRhdGFzZXQuZXRjaERyYXdlclRyaWdnZXJTZWxlY3RvciA9CgkJCWBbZGF0YS1kcmF3ZXItdHJpZ2dlci1pbmRleD0iJHtpbmRleH0iXWA7Cgl9IGVsc2UgewoJCWNvbnNvbGUud2FybigKCQkJYE5vdCBlbm91Z2ggdHJpZ2dlciBlbGVtZW50cyBmb3Igc2VsZWN0b3IgIiR7dHJpZ2dlclNlbGVjdG9yfSIg4oCUIG5lZWRlZCBpbmRleCAke2luZGV4fWAKCQkpOwoJfQp9CgpmdW5jdGlvbiBwcm9jZXNzRHJhd2VySWRBbmRJbmRleGluZyhkcmF3ZXJFbCwgaWRDb3VudCwgaW5FdGNoKSB7CglsZXQgZHJhd2VySWQgPSBkcmF3ZXJFbC5kYXRhc2V0LmV0Y2hEcmF3ZXJJZDsKCWNvbnN0IGlzSW5Mb29wID0gZHJhd2VyRWwuZGF0YXNldC5ldGNoRHJhd2VyTG9vcCA9PT0gInRydWUiOwoJY29uc29sZS5sb2coJ2lzSW5Mb29wJywgaXNJbkxvb3ApOwoKCWlmICghZHJhd2VySWQpIHsKCQljb25zb2xlLmVycm9yKGBDYW5ub3QgZmluZCBEcmF3ZXIgSUQsIGlzICR7RXRjaERyYXdlclNjcmlwdC5BVFRSSUJVVEVTLkRSQVdFUl9JRH0gc2V0P2ApOwoJCXJldHVybiBudWxsOwoJfQoKCWRyYXdlcklkID0gZHJhd2VySWQudHJpbSgpOwoJaWYgKCFkcmF3ZXJJZCkgewoJCWNvbnNvbGUuZXJyb3IoYEVtcHR5ICR7RXRjaERyYXdlclNjcmlwdC5BVFRSSUJVVEVTLkRSQVdFUl9JRH0gZm91bmQuYCk7CgkJcmV0dXJuIG51bGw7Cgl9CgoJLy8gRGV0ZXJtaW5lIHVuaXF1ZSBpbmRleAoJaWYgKCFpbkV0Y2gpIHsKCQlsZXQgaW5kZXggPSBpZENvdW50LmdldChkcmF3ZXJJZCkgfHwgMDsKCQlpZENvdW50LnNldChkcmF3ZXJJZCwgaW5kZXggKyAxKTsKCgkJLy8gTG9vcCBkcmF3ZXJzIGdldCBpbmRleGVkIElEcwoJCWlmIChpc0luTG9vcCkgewoJCQljb25zdCBuZXdJZCA9IGAke2RyYXdlcklkfS0ke2luZGV4fWA7CgkJCWRyYXdlckVsLmRhdGFzZXQuZXRjaERyYXdlcklkID0gbmV3SWQ7CgkJCWRyYXdlcklkID0gbmV3SWQ7CgkJfSBlbHNlIGlmIChpbmRleCA+IDApIHsKCQkJY29uc29sZS5lcnJvcigKCQkJCWBEdXBsaWNhdGUgJHtFdGNoRHJhd2VyU2NyaXB0LkFUVFJJQlVURVMuRFJBV0VSX0lEfSBmb3VuZDogJHtkcmF3ZXJJZH1gCgkJCSk7CgkJCXJldHVybiBudWxsOwoJCX0KCgkJaWYgKGlzSW5Mb29wKSB7CgkJCXByb2Nlc3NMb29wRHJhd2VyVHJpZ2dlcihkcmF3ZXJFbCwgaW5kZXgpOwoJCX0KCX0KCglyZXR1cm4gZHJhd2VySWQ7Cn0KCmZ1bmN0aW9uIHByb2Nlc3NEcmF3ZXJFbGVtZW50KGRyYXdlckVsLCBpZENvdW50LCBpbkV0Y2gpIHsKCWNvbnN0IGRyYXdlcklkID0gcHJvY2Vzc0RyYXdlcklkQW5kSW5kZXhpbmcoZHJhd2VyRWwsIGlkQ291bnQsIGluRXRjaCk7CglpZiAoIWRyYXdlcklkKSByZXR1cm47CgoJY29uc3QgZHJhd2VySW5zdGFuY2UgPSBuZXcgRXRjaERyYXdlclNjcmlwdChkcmF3ZXJFbCk7Cgl3aW5kb3cuZXRjaEVsZW1lbnRzLmV0Y2hEcmF3ZXJbZHJhd2VySWRdID0gZHJhd2VySW5zdGFuY2U7Cn0KCmZ1bmN0aW9uIGluc3RhbnRpYXRlRHJhd2VycygpIHsKCWNvbnN0IGluRXRjaCA9IHdpbmRvdyAhPT0gd2luZG93LnRvcCAmJiB3aW5kb3cuZnJhbWVFbGVtZW50Py5pZCA9PT0gJ2V0Y2gtaWZyYW1lJzsKCXdpbmRvdy5ldGNoRWxlbWVudHMgPSB3aW5kb3cuZXRjaEVsZW1lbnRzIHx8IHt9OwoJd2luZG93LmV0Y2hFbGVtZW50cy5ldGNoRHJhd2VyID0gd2luZG93LmV0Y2hFbGVtZW50cy5ldGNoRHJhd2VyIHx8IHt9OwoKCWNvbnN0IGRyYXdlckVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmV0Y2gtZHJhd2VyJyk7CglpZiAoIWRyYXdlckVsZW1lbnRzLmxlbmd0aCkgcmV0dXJuOwoKCWNvbnN0IGlkQ291bnQgPSBuZXcgTWFwKCk7CgoJZm9yIChjb25zdCBkcmF3ZXJFbCBvZiBkcmF3ZXJFbGVtZW50cykgewoJCXByb2Nlc3NEcmF3ZXJFbGVtZW50KGRyYXdlckVsLCBpZENvdW50LCBpbkV0Y2gpOwoJfQoKCXJldHVybiB3aW5kb3cuZXRjaEVsZW1lbnRzLmV0Y2hEcmF3ZXI7Cn0KCmluc3RhbnRpYXRlRHJhd2VycygpOwo=","id":"qrepcz4"},"tag":"div","attributes":{"data-etch-drawer-id":"{props.drawerId}","data-etch-drawer-trigger-selector":"{props.triggerSelector}","data-etch-drawer-placement":"{props.drawerPlacement}","data-etch-drawer-display-method":"{props.drawerDisplayMethod}","data-etch-drawer-max-width":"{props.maxWidth}","data-etch-drawer-editor-toggle":"{props.showEditor}","data-etch-drawer-clone-selector":"{props.cloneSelector}","data-etch-drawer-loop":"{props.isInLoop}","style":"--etch-drawer-background-color: {props.drawerBackgroundColor}; --etch-drawer-backdrop-color: {props.drawerBackdropColor}; --etch-drawer-padding: {props.drawerPadding}; --etch-drawer-panel-max-height: {props.maxHeight};","class":"etch-drawer"},"styles":["nzbl2fs"]},"innerBlocks":[{"blockName":"etch/element","attrs":{"metadata":{"name":"Overlay"},"tag":"div","attributes":{"aria-hidden":"true","class":"etch-drawer__overlay"},"styles":["ae2q5st"]},"innerBlocks":[],"innerHTML":"\n\n","innerContent":["\n","\n"]},{"blockName":"etch/element","attrs":{"metadata":{"name":"Panel"},"tag":"div","attributes":{"role":"dialog","id":"etch-drawer-panel-{props.drawerId}","aria-labelledby":"etch-drawer-trigger-{props.drawerId}","aria-modal":"true","hidden":"hidden","class":"etch-drawer__panel"},"styles":["tl3b42z"]},"innerBlocks":[{"blockName":"etch/condition","attrs":{"metadata":{"name":"If (Condition)"},"condition":{"leftHand":"props.closeButtonVariant","operator":"===","rightHand":"\"icon\""},"conditionString":"props.closeButtonVariant === 'icon'"},"innerBlocks":[{"blockName":"etch/element","attrs":{"metadata":{"name":"Close"},"tag":"button","attributes":{"aria-label":"Close drawer","class":"etch-drawer__close etch-drawer__close--icon-only"},"styles":["qgiijqf","4mtci00"]},"innerBlocks":[{"blockName":"etch/element","attrs":{"tag":"svg","attributes":{"width":"24","height":"24","viewBox":"0 0 24 24","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},"innerBlocks":[{"blockName":"etch/element","attrs":{"tag":"path","attributes":{"fill":"currentColor","d":"M18 6L6 18M6 6l12 12","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round"}},"innerBlocks":[],"innerHTML":"\n\n","innerContent":["\n","\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]},{"blockName":"etch/condition","attrs":{"metadata":{"name":"If (Condition)"},"condition":{"leftHand":"props.closeButtonVariant","operator":"===","rightHand":"\"label\""},"conditionString":"props.closeButtonVariant === 'label'"},"innerBlocks":[{"blockName":"etch/element","attrs":{"metadata":{"name":"Close"},"tag":"button","attributes":{"aria-label":"Close drawer","class":"etch-drawer__close etch-drawer__close--label-only"},"styles":["qgiijqf","tvpquys"]},"innerBlocks":[{"blockName":"etch/text","attrs":{"metadata":{"name":"Text"},"content":"{props.closeButtonLabel} "},"innerBlocks":[],"innerHTML":"","innerContent":[]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]},{"blockName":"etch/condition","attrs":{"metadata":{"name":"If (Condition)"},"condition":{"leftHand":"props.closeButtonVariant","operator":"===","rightHand":"\"label-icon\""},"conditionString":"props.closeButtonVariant === 'label-icon'"},"innerBlocks":[{"blockName":"etch/element","attrs":{"metadata":{"name":"Close"},"tag":"button","attributes":{"aria-label":"Close drawer","class":"etch-drawer__close etch-drawer__close--label-icon"},"styles":["qgiijqf","bjbstr6"]},"innerBlocks":[{"blockName":"etch/element","attrs":{"tag":"span","attributes":{}},"innerBlocks":[{"blockName":"etch/text","attrs":{"metadata":{"name":"Text"},"content":"{props.closeButtonLabel}"},"innerBlocks":[],"innerHTML":"","innerContent":[]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]},{"blockName":"etch/element","attrs":{"tag":"svg","attributes":{"width":"24","height":"24","viewBox":"0 0 24 24","fill":"none","xmlns":"http://www.w3.org/2000/svg"}},"innerBlocks":[{"blockName":"etch/element","attrs":{"tag":"path","attributes":{"fill":"currentColor","d":"M18 6L6 18M6 6l12 12","stroke":"currentColor","stroke-width":"2","stroke-linecap":"round"}},"innerBlocks":[],"innerHTML":"\n\n","innerContent":["\n","\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]}],"innerHTML":"\n\n\n\n","innerContent":["\n",null,"\n\n",null,"\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]},{"blockName":"etch/element","attrs":{"metadata":{"name":"Content"},"tag":"div","attributes":{"class":"etch-drawer__content"},"styles":["2r3yzmd"]},"innerBlocks":[{"blockName":"etch/slot-placeholder","attrs":{"name":"drawerContent"},"innerBlocks":[],"innerHTML":"\n\n","innerContent":["\n","\n"]}],"innerHTML":"\n\n","innerContent":["\n",null,"\n"]}],"innerHTML":"\n\n\n\n\n\n\n\n","innerContent":["\n",null,"\n\n",null,"\n\n",null,"\n\n",null,"\n"]}],"innerHTML":"\n\n\n\n","innerContent":["\n",null,"\n\n",null,"\n"]}]}}}